add_executable(Test Test.cpp)
add_executable(MatlabTest MatlabTest.cpp)
add_executable(MKLTest EigenTest.cpp)
add_executable(MKLTest2 MKLTest.cpp)
add_executable(FiberTest FiberTest.cpp)
add_executable(MzmodTest MzmodTest.cpp)

find_library(LIBRARY Library ${PROJECT_SOURCE_DIR}/lib)

if (LIBRARY)
    target_link_libraries(Test ${LIBRARY} MKL::MKL)
    target_link_libraries(MatlabTest ${LIBRARY} MKL::MKL)
    target_link_libraries(MKLTest2 ${LIBRARY} MKL::MKL)
    target_link_libraries(MKLTest ${LIBRARY} MKL::MKL)
    target_link_libraries(FiberTest ${LIBRARY} MKL::MKL)
    target_link_libraries(MzmodTest ${LIBRARY} MKL::MKL)
else ()
    message(WARNING "Library not found, please build Library target manually.")
endif()

# Find Matlab library on personal computer
find_package(Matlab)
if (Matlab_FOUND)
    include_directories(${Matlab_INCLUDE_DIRS})
    target_link_libraries(MatlabTest ${Matlab_ENGINE_LIBRARY} ${Matlab_DATAARRAY_LIBRARY})
else ()
    message(WARNING "Matlab libs not found")
endif ()